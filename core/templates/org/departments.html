{#
  departments.html - 部门列表页 / Department List Page
  
  组织架构中的部门管理：
  Department management in organization:
  
  Features / 功能:
  - 部门列表 (ID、名称) / Department list
  - 新增部门入口 / Add department link
  - 删除部门 / Delete department
  - 人员管理跳转 / Personnel management link
  
  Dependencies / 依赖:
  - base.html (父模板 / Parent template)
  
  Variables / 传入变量:
  - departments: 部门列表 / Department list
#}
{% extends 'base.html' %}

{% block title %}部门管理 - {{ config.COMPANY_NAME }}{% endblock %}

{% block content %}
<div class="glass-panel" style="padding: 24px; border-radius: 12px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
        <h2 style="margin: 0; font-size: 1.5rem; font-weight: 700;">部门列表</h2>
        <div>
            <a href="{{ url_for('org.new_department') }}" class="btn-industrial">+ 新增部门</a>
            <a href="{{ url_for('org.list_persons') }}" class="btn-industrial" style="background-color: transparent; border: 1px solid rgba(255,255,255,0.2); margin-left: 12px;">人员管理</a>
        </div>
    </div>

    {% if departments %}
    <div class="table-container">
        <table class="ind-table">
            <thead>
                <tr>
                    <th style="width: 10%;">ID</th>
                    <th style="width: 70%;">部门名称</th>
                    <th style="width: 20%; text-align: right;">操作</th>
                </tr>
            </thead>
            <tbody>
                {% for d in departments %}
                <tr>
                    <td>{{ d.id }}</td>
                    <td style="font-weight: 500;">{{ d.name }}</td>
                    <td style="text-align: center;">
                        <form method="post" action="{{ url_for('org.delete_department', dept_id=d.id) }}" style="display:inline; margin:0;">
                             <button type="submit" onclick="return confirm('确认删除该部门？');" 
                                style="background: transparent; border: none; color: var(--color-danger); cursor: pointer; opacity: 0.8; transition: opacity 0.2s;">
                                删除
                            </button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div style="text-align: center; padding: 48px; color: var(--color-text-sub); border: 1px dashed rgba(255,255,255,0.1); border-radius: 8px;">
        当前还没有部门，请点击右上角新增。
    </div>
    {% endif %}
</div>
{% endblock %}
